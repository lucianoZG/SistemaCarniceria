<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Carnicer칤a Sistema</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1998/1998571.png" type="image/png">
        <style>
            .hero-section {
                display: flex;
                flex-direction: column;
                justify-content: center;

                position: relative;
                background-image: url('https://images.unsplash.com/photo-1611038333075-2efd28705f42?q=80&w=1249&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
                background-size: cover;
                background-position: center;
                background-repeat: no-repeat;

                /* Altura y alineaci칩n */
                padding: 100px 20px;
                color: white;
                text-align: center;
                min-height: 60vh;

                /* Para que el overlay quede encima */
                overflow: hidden;
            }

            /* Capa de sombreado encima de la imagen */
            .hero-section::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;

                /* Sombreado elegante */
                background: linear-gradient(to bottom, rgba(0,0,0,0.5), rgba(0,0,0,0.7));

                /* Puedes ajustar la opacidad */
                z-index: 1;
            }

            /* Que el contenido quede arriba del sombreado */
            .hero-section > * {
                position: relative;
                z-index: 2;
            }

            /* Animaci칩n suave para el h칠roe */
            .hero-content {
                opacity: 0;
                transform: translateY(20px);
                animation: fadeUp 1s ease-out forwards;
                animation-delay: 0.2s;
            }

            @keyframes fadeUp {
                from {
                    opacity: 0;
                    transform: translateY(20px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }


            .feature-card {
                transition: transform 0.2s ease, box-shadow 0.2s ease;
            }
            .feature-card:hover {
                transform: translateY(-5px);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            .stat-card {
                border: none;
                border-radius: 16px;
                padding: 24px;
                background: #ffffff;
                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
                transition: transform .15s ease;
                height: 170px; /* altura uniforme como tu ejemplo */
            }

            .stat-card:hover {
                transform: translateY(-4px);
            }

            .stat-icon {
                width: 40px;
                height: 40px;
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 20px;
                font-weight: bold;
            }

            .stat-label {
                font-size: 15px;
                color: #666;
                margin-bottom: 4px;
            }

            .stat-value {
                font-size: 26px;
                font-weight: bold;
                color: #222;
            }

            .stat-sub {
                font-size: 14px;
                margin-top: 6px;
            }

            .icon-green {
                background: #d3f9d8;
                color: #1b8a5a;
            }
            .icon-blue  {
                background: #dbe4ff;
                color: #3b5bdb;
            }
            .icon-orange{
                background: #ffe8cc;
                color: #d9480f;
            }
            .icon-purple{
                background: #f3d9fa;
                color: #862e9c;
            }

            .dashboard-title {
                font-size: 38px;
                font-weight: 800;
                color: #222;
                margin-bottom: 20px;
            }

            .hero-script {
                font-family: 'Brush Script MT', cursive;
                font-size: 42px;
                margin-bottom: 25px;
                font-weight: 300;
                opacity: 0;
                animation: fadeUp 1s ease forwards;
                animation-delay: .4s;
            }

            .hero-subtitle {
                font-size: 28px;
                letter-spacing: 2px;
                font-weight: 300;
                opacity: 0;
                animation: fadeUp 1s ease forwards;
            }

            .hero-title {
                font-size: 60px;
                font-weight: 800;
                margin: 10px 0;
                opacity: 0;
                animation: fadeUp 1s ease forwards;
                animation-delay: .2s;
            }

            body {
                background: linear-gradient(180deg, #ffffff 0%, #fff1f1 40%, #ffe5e5 100%);
            }

            .chart-size {
                width: 100% !important;
                height: 600px !important;
            }

            .fondo-grafico {
                border: none;
                border-radius: 16px;
                padding: 24px;
                background: #ffffff;
                box-shadow: 0 4px 15px rgba(0,0,0,0.05);
                transition: transform .15s ease;
            }

        </style>
    </head>
    <body class="d-flex flex-column min-vh-100">

        <!-- Navbar -->
        <div th:replace="fragments/navbar :: navbar('')"></div>

        <!-- HERO -->
        <section class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">춰Bienvenido!</h1>
                <h5 class="hero-script">Sistema de Gesti칩n Integral para Carnicer칤a</h5>
                <p class="hero-subtitle">Administra ventas, productos, empleados e informes desde un solo lugar</p>
            </div>
        </section>

        <!-- DASHBOARD DE ESTAD칈STICAS -->

        <div class="container my-5">
            <!-- T칈TULO PRINCIPAL -->
            <h1 class="dashboard-title">Panel de Control</h1>


            <!--<div class="fondo-grafico">-->
                <!-- GR츼FICOS -->
                <div class="row g-6 justify-content-center fondo-grafico mb-3">
                    <!-- Top 5 Productos M치s Vendidos -->
                    <div class="col-md-2 col-lg-6 mt-4 mb-3">
                        <div class="d-flex flex-column align-items-center justify-content-center">
                            <h4 class="text-center text-danger"><strong>Top 5 Productos M치s Vendidos</strong></h4>
                            <canvas id="topProductosChart" class="chart-size"></canvas>
                        </div>
                    </div>

                    <div class="col-md-2 col-lg-6 mt-4 mb-3">
                        <!-- Ventas por d칤as de la semana -->
                        <div class="d-flex flex-column align-items-center justify-content-center">
                            <h4 class="text-center text-danger"><strong>Ventas por d칤a de la semana</strong></h4>
                            <canvas id="ventasSemanaChart" class="chart-size"></canvas>
                        </div>
                    </div>
                </div>
            <!--</div>-->

            <div class="row g-4 justify-content-center">

                <!-- Producto m치s vendido -->
                <div class="col-md-5 col-lg-3">
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-label">Fecha del 칰ltimo inventario realizado</div>
                                <div class="stat-value text-danger" 
                                     th:text="${ultimoInventario}">
                                    20/11/2025
                                </div>
                            </div>
                            <div class="stat-icon icon-green">游닍</div>
                        </div>
                    </div>
                </div>

                <!-- Menor stock -->
                <div class="col-md-5 col-lg-3">
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-label">Producto con menor stock</div>
                                <div class="stat-value text-danger" 
                                     th:text="${productoConMenorStock != null ? productoConMenorStock : 'Sin datos'}">
                                </div>
                            </div>
                            <div class="stat-icon icon-orange">丘멆잺</div>
                        </div>
                    </div>
                </div>

                <!-- Ganancias del d칤a -->
                <div class="col-md-5 col-lg-3">
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-label">Ganancias del d칤a</div>
                                <div class="stat-value text-danger" 
                                     th:text="${gananciasDelDia + ' $'}">
                                </div>
                            </div>
                            <div class="stat-icon icon-purple">游눯</div>
                        </div>
                    </div>
                </div>

                <!-- Empleado con m치s ventas -->
                <div class="col-md-5 col-lg-3">
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-label">Empleado con m치s ventas</div>
                                <div class="stat-value text-danger" 
                                     th:text="${empleadoMasVentas}">
                                </div>
                            </div>
                            <div class="stat-icon icon-blue">游녻</div>
                        </div>
                    </div>
                </div>



            </div>

        </div>

        <!-- Chart.js -->
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

        <script th:inline="javascript">
            const nombres = [[${nombresProductos
            }
            ]];
            const cantidades = [[${cantidadesProductos
            }
            ]];
            const ctx = document.getElementById('topProductosChart').getContext('2d');
            new Chart(ctx, {
            type: 'pie',
                    data: {
                    labels: nombres,
                            datasets: [{
                            data: cantidades,
                                    borderWidth: 1
                            }]
                    },
                    options: {
                    responsive: true,
                            plugins: {
                            legend: {
                            position: 'bottom',
                                    labels: {
                                    font: {
                                    size: 20,
                                            weight: 'bold'
                                    },
                                            padding: 18
                                    }
                            }
                            }
                    }
            });
        </script>

        <script th:inline="javascript">
            const dias = [[${diasSemana}]];
            const cantidadesDias = [[${cantidadesDias}]];
            const ctx2 = document.getElementById('ventasSemanaChart').getContext('2d');
            new Chart(ctx2, {
            type: 'bar',
                    data: {
                    labels: dias,
                            datasets: [{
                            label: 'Ventas',
                                    data: cantidadesDias,
                                    borderWidth: 1
                            }]
                    },
                    options: {
                    responsive: true,
                            maintainAspectRatio: false,
                            interaction: {
                            mode: 'nearest',
                                    intersect: true
                            },
                            scales: {
                            y: {
                            beginAtZero: true,
                                    ticks: {
                                    font: { size: 14 }
                                    }
                            },
                                    x: {
                                    ticks: {
                                    font: { size: 20 }
                                    }
                                    }
                            },
                            plugins: {
                            legend: {
                            labels: {
                            font: { size: 20 }
                            }
                            }
                            }
                    }
            });
        </script>



        <!-- FEATURES -->
        <div class="container py-5">

            <!-- T칈TULO PRINCIPAL -->
            <h1 class="dashboard-title">Funciones principales</h1>

            <div class="row g-4 justify-content-center">
                <div class="col-md-3">
                    <a th:href="@{/ventas}" class="text-decoration-none text-dark">
                        <div class="card feature-card text-center border-0 shadow-sm">
                            <div class="card-body">
                                <div class="fs-1 text-dark mb-3">游눳</div>
                                <h5 class="fw-bold">Ventas</h5>
                                <p class="text-muted small">Registra y gestiona todas las ventas del d칤a</p>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-md-3">
                    <a th:href="@{/productos}" class="text-decoration-none text-dark">
                        <div class="card feature-card text-center border-0 shadow-sm">
                            <div class="card-body">
                                <div class="fs-1 text-dark mb-3">游닍</div>
                                <h5 class="fw-bold">Productos</h5>
                                <p class="text-muted small">Administra el inventario y cat치logo de productos</p>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-md-3">
                    <a th:href="@{/empleados}" class="text-decoration-none text-dark">
                        <div class="card feature-card text-center border-0 shadow-sm">
                            <div class="card-body">
                                <div class="fs-1 text-dark mb-3">游논</div>
                                <h5 class="fw-bold">Empleados</h5>
                                <p class="text-muted small">Gestiona el personal y sus horarios</p>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-md-3">
                    <a th:href="@{/inventarios}" class="text-decoration-none text-dark">
                        <div class="card feature-card text-center border-0 shadow-sm">
                            <div class="card-body">
                                <div class="fs-1 text-dark mb-3">游늶</div>
                                <h5 class="fw-bold">Inventario</h5>
                                <p class="text-muted small">Gestiona el stock de productos del local</p>
                            </div>
                        </div>
                    </a>
                </div>

                <div class="col-md-3 mt-4">
                    <a th:href="@{/informes/stock}" class="text-decoration-none text-dark">
                        <div class="card feature-card text-center border-0 shadow-sm">
                            <div class="card-body">
                                <div class="fs-1 text-dark mb-3">游늵</div>
                                <h5 class="fw-bold">Informes</h5>
                                <p class="text-muted small">Consulta estad칤sticas y reportes detallados</p>
                            </div>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <div th:replace="fragments/footer :: footer"></div>

    </body>
</html>
